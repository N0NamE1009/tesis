\ProvidesPackage{ESFMpreamble}

%-----------------------------------------------------------------------------
% Mandatory libraries

\usepackage[width=152.6mm, top=1in, bottom=1in, bindingoffset=6mm]{geometry}
\usepackage[T1]{fontenc}  % to be able to copy and paste accented characters from pdf
\usepackage{tikz}  % required for banner definition
\usepackage{fancyhdr}  % required custom headers and footers

%------------------------------------------------------------------------------%
% Institutional colors
% details: these colors were obtained from the "Manual básico de Imagen CIMAT"

\definecolor{grisIPN}{RGB}{111,114,156}  
\definecolor{guindaIPN}{RGB}{157,36,73}  

%-----------------------------------------------------------------------------%
% Banner and Logo definition

% This image banner was reproduced by Cristal E. Méndez Ramírez
% It was built according to the institutional colors of CIMAT
% E-mail: sktmeri25@gmail.com

\setlength{\headheight}{15pt}  % \headheight fix

\fancypagestyle{firststyle}
{
	\renewcommand{\headrulewidth}{0pt}
	\fancyhf{}
	\fancyhead[L]{}
}
% Official logos: https://www.cimat.mx/en/plantillas-documentos-electr%C3%B3nicos

%-----------------------------------------------------------------------------%
% Coverpage

% 28.4pt == 1cm
% \the\textwidth == 433.62001 pt == 15.26831 cm
% Definition

\@ifpackageloaded{geometry}{}{\RequirePackage[pass]{geometry}}

\newcommand*{\documentType}[1]{\gdef\@documentType{#1}}

\newcommand*{\faculty}[1]{\gdef\@faculty{#1}}
\newcommand*{\@faculty}{\texttt{\string\faculty} Faculty or Institute. Please fix this.} % default text
\newcommand*{\degree}[1]{\gdef\@degree{#1}}
\newcommand*{\@degree}{\texttt{\string\degree}degree currently not set. Please fix this.} % default text

\newcommand*{\supervisor}[1]{\gdef\@supervisor{#1 \vspace{1.2cm}}}
\newcommand*{\@supervisor}{\texttt{\string\supervisor} supervisor currently not set. Please fix this.} % default text

% Second Supervisor
\newcommand*{\supervisorSecond}[1]{\gdef\@supervisorSecond{ { \vspace{-1.2cm} {\bfseries Co-director de Tesis:}\\[0.2cm] {\large #1} } }}
\newcommand*{\@supervisorSecond}{} % default text: empty field

\newcommand*{\cityandyear}[1]{\gdef\@cityandyear{#1}}
\newcommand*{\@cityandyear}{\texttt{\string\cityandyear} city and year currently not set. Please fix this.} % default text
\newcommand*{\logouni}[1]{\gdef\@logouni{#1}}
\newcommand*{\@logouni}{example-image-a}
\newcommand*{\logofac}[1]{\gdef\@logofac{#1}}
\newcommand*{\@logofac}{example-image-b}

% Title page
\renewcommand*{\maketitle}{%
	\begin{titlepage}
		\newgeometry{left=1.2cm,right=1.2cm,bottom=1.0cm,top=0.9cm}
		\thispagestyle{firststyle}
		
		\noindent
		\begin{minipage}[c]{0.10\textwidth}
			\begin{flushleft}
				\includegraphics[height=3.2cm]{logo/LogoIPN}  
			\end{flushleft}
		\end{minipage}
		\begin{minipage}[t]{0.76\textwidth}
			\vspace{0.63cm}
			\begin{flushleft}
				{ {\color{guindaIPN} {\bfseries \begin{center}
							\Huge	{Instituto Politecnico Nacional}\\
							\large {Escuela Superior de Física y Matemáticas}
							\end{center}
							}}}
			\end{flushleft}
		\end{minipage}
		\begin{minipage}[c]{0.15\textwidth}
			\begin{flushleft}
				\includegraphics[height=3.0cm]{logo/ESFM}  
			\end{flushleft}
		\end{minipage}
	
		\vspace{0.1cm}
		{\color{guindaIPN} \hrule height 1.9pt} 
		\vspace{2.2cm} 
		
		\begin{center}
			{\bfseries \LARGE \emph\@title\par}
			\vspace{2.1cm}
			\makebox[8cm][s]{\Large\bfseries \@documentType }\\[0.2cm]
			\makebox[7cm][c]{PARA OBTENER EL GRADO DE}\\[0.2cm]
			{\bfseries \large \@degree}\\[3.0 cm]
			% TODO: \usepackage{graphicx} required
			\vspace{-2.5 cm}
			\begin{figure}[h!]
				\centering
				\includegraphics[width=0.2\linewidth]{img/RS}
			\end{figure}
			
			\makebox[7cm][c]{\bfseries Presenta:}\\[0.2cm]
			{\large \@author}\par
			\vspace{0.7cm}
			{{\bfseries Director de Tesis:}\\[0.2cm] % 0.8 cm
				{\large \@supervisor}} \par
			\vspace{0.7cm}
			% {{\bfseries Co-director de Tesis:}\\[0.2cm] % 0.8 cm
				% {\large \@supervisorSecond}}\\[2.1cm]
			\@supervisorSecond
			\vspace{0.5cm}
			\vfill
			
			
			%\rule{7cm}{0.8pt}\\
			%{\small \bfseries Autorización de la versión final}
			
		\end{center}
		
		\vfill
		
		\begin{flushright}
			{\small \@cityandyear}
		\end{flushright}
		%\vspace{.99cm}
	\end{titlepage}
}

%-----------------------------------------------------------------------------%
% Customize header and footer

\pagestyle{fancy}

\fancyhead{}  % clear header settings
\fancyhead[LE]{{ \thepage \qquad  \textit{\leftmark}}}
\fancyhead[RO]{{ \textit{\rightmark} \qquad \thepage}}
\renewcommand{\headrulewidth}{0pt}  % remove head rule

\fancyfoot{}  % reset page numbering on the footer